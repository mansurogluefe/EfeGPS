<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EfeGPS Pro - AkÄ±llÄ± AraÃ§ Takip Sistemi</title>

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-polylinedecorator@1.6.0/dist/leaflet.polylineDecorator.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body data-theme="dark">

<!-- Header -->
<div id="header">
    <div class="header-content">
        <h1><i class="fas fa-satellite-dish"></i> EfeGPS Pro</h1>
        <div id="live-status">
            <div class="status-indicator" id="connection-status">
                <i class="fas fa-circle"></i>
                <span>CANLI BAÄžLANTI</span>
            </div>
            <div class="vehicle-info">
                <span id="current-speed">0 km/s</span>
                <span id="last-update">--:--:--</span>
            </div>
        </div>
    </div>
</div>

<!-- Main Layout -->
<div id="main-container">
    <!-- Map -->
    <div id="map-container">
        <div id="map-controls">
            <button id="btn-live" class="map-btn active"><i class="fas fa-play"></i> CanlÄ±</button>
            <button id="btn-history" class="map-btn"><i class="fas fa-history"></i> GeÃ§miÅŸ</button>
            <button id="btn-satellite" class="map-btn"><i class="fas fa-globe"></i> Uydu</button>
        </div>
        <div id="map"></div>
        <div id="live-marker-info">
            <div class="info-card">
                <h4><i class="fas fa-motorcycle"></i> CanlÄ± Konum</h4>
                <p><strong>HÄ±z:</strong> <span id="live-speed">0 km/s</span></p>
                <p><strong>YÃ¶n:</strong> <span id="live-bearing">0Â°</span></p>
                <p><strong>YÃ¼kseklik:</strong> <span id="live-altitude">0 m</span></p>
                <p><strong>Son GÃ¼ncelleme:</strong> <span id="live-update">--:--:--</span></p>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div id="sidebar" class="open">
        <div id="sidebar-content">
            <!-- Navigation -->
            <div class="sidebar-nav">
                <div class="nav-item active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Kontrol Paneli</span>
                </div>
                <div class="nav-item" data-tab="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>Analizler</span>
                </div>
                <div class="nav-item" data-tab="history">
                    <i class="fas fa-road"></i>
                    <span>Rotalar</span>
                </div>
                <div class="nav-item" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>Ayarlar</span>
                </div>
            </div>

            <!-- Tab Contents -->
            <div class="tab-content active" id="dashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon speed">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="current-live-speed">0</h3>
                            <p>AnlÄ±k HÄ±z (km/s)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon distance">
                            <i class="fas fa-road"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="today-distance">0</h3>
                            <p>BugÃ¼nkÃ¼ Mesafe (km)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card">
                            <div class="stat-icon fuel">
                                <i class="fas fa-gas-pump"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="today-fuel-cost">0</h3>
                                <p>BugÃ¼nkÃ¼ YakÄ±t (TL)</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon score">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="driving-score">100</h3>
                            <p>SÃ¼rÃ¼ÅŸ PuanÄ±</p>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h4><i class="fas fa-bolt"></i> HÄ±zlÄ± Ä°ÅŸlemler</h4>
                    <div class="action-buttons">
                        <button class="action-btn" id="btn-route-plan">
                            <i class="fas fa-route"></i>
                            <span>Rota Planla</span>
                        </button>
                        <button class="action-btn" id="btn-fuel-calc">
                            <i class="fas fa-calculator"></i>
                            <span>YakÄ±t Hesapla</span>
                        </button>
                        <button class="action-btn" id="btn-emergency">
                            <i class="fas fa-phone-alt"></i>
                            <span>Acil Durum</span>
                        </button>
                        <button class="action-btn" id="btn-share-live">
                            <i class="fas fa-share-alt"></i>
                            <span>Konum PaylaÅŸ</span>
                        </button>
                    </div>
                </div>

                <div class="alerts-container">
                    <h4><i class="fas fa-bell"></i> Son UyarÄ±lar</h4>
                    <div id="live-alerts">
                        <div class="alert-item info">
                            <i class="fas fa-info-circle"></i>
                            <span>Sistem baÅŸlatÄ±ldÄ±. CanlÄ± takip aktif.</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="analytics">
                <h3><i class="fas fa-chart-bar"></i> DetaylÄ± Analizler</h3>

                <div class="analysis-section">
                    <h5>ðŸ“ˆ GÃ¼nlÃ¼k Ä°statistikler</h5>
                    <div class="stats-row">
                        <div class="stat-item">
                            <label>Toplam Mesafe</label>
                            <span id="analytics-distance">0 km</span>
                        </div>
                        <div class="stat-item">
                            <label>Ortalama HÄ±z</label>
                            <span id="analytics-avg-speed">0 km/s</span>
                        </div>
                    </div>
                    <div class="stats-row">
                        <div class="stat-item">
                            <label>Maksimum HÄ±z</label>
                            <span id="analytics-max-speed">0 km/s</span>
                        </div>
                        <div class="stat-item">
                            <label>SÃ¼rÃ¼ÅŸ SÃ¼resi</label>
                            <span id="analytics-drive-time">0s</span>
                        </div>
                    </div>
                </div>

                <div class="analysis-section">
                    <h5>â›½ YakÄ±t Analizi</h5>
                    <div class="fuel-info">
                        <div class="fuel-price">
                            <label>GÃ¼ncel Benzin FiyatÄ±</label>
                            <div class="price-input">
                                <input type="number" id="current-fuel-price" value="42.50" step="0.01">
                                <span>TL/L</span>
                            </div>
                        </div>
                        <div class="fuel-stats">
                            <div class="fuel-stat">
                                <span class="fuel-label">BugÃ¼nkÃ¼ TÃ¼ketim</span>
                                <span class="fuel-value" id="today-fuel">0 L</span>
                            </div>
                            <div class="fuel-stat">
                                <span class="fuel-label">Toplam Maliyet</span>
                                <span class="fuel-value" id="total-fuel-cost">0 TL</span>
                            </div>
                            <div class="fuel-stat">
                                <span class="fuel-label">CO2 SalÄ±nÄ±mÄ±</span>
                                <span class="fuel-value" id="co2-emission">0 kg</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="analysis-section">
                    <h5>ðŸŽ¯ Performans Metrikleri</h5>
                    <div class="performance-metrics">
                        <div class="metric">
                            <label>Rota VerimliliÄŸi</label>
                            <div class="metric-bar">
                                <div class="metric-fill" id="efficiency-bar" style="width: 0%"></div>
                            </div>
                            <span id="efficiency-value">0%</span>
                        </div>
                        <div class="metric">
                            <label>HÄ±z Ä°stikrarÄ±</label>
                            <div class="metric-bar">
                                <div class="metric-fill" id="stability-bar" style="width: 0%"></div>
                            </div>
                            <span id="stability-value">0%</span>
                        </div>
                        <div class="metric">
                            <label>GÃ¼venlik PuanÄ±</label>
                            <div class="metric-bar">
                                <div class="metric-fill" id="safety-bar" style="width: 0%"></div>
                            </div>
                            <span id="safety-value">0%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="history">
                <h3><i class="fas fa-history"></i> GeÃ§miÅŸ Rotalar</h3>

                <div class="date-selector">
                    <label>Tarih SeÃ§in:</label>
                    <input type="date" id="history-date" value="">
                </div>

                <div class="route-list" id="route-list">
                    <div class="route-item" data-date="2024-01-15">
                        <div class="route-icon">
                            <i class="fas fa-route"></i>
                        </div>
                        <div class="route-info">
                            <h4>15 Ocak 2024</h4>
                            <p>42.5 km â€¢ 1s 15d â€¢ 28.4 TL</p>
                        </div>
                        <button class="route-btn">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="export-actions">
                    <button class="export-btn" id="export-pdf">
                        <i class="fas fa-file-pdf"></i> PDF Rapor
                    </button>
                    <button class="export-btn" id="export-excel">
                        <i class="fas fa-file-excel"></i> Excel
                    </button>
                    <button class="export-btn" id="export-gpx">
                        <i class="fas fa-map-marked-alt"></i> GPX
                    </button>
                </div>
            </div>

            <div class="tab-content" id="settings">
                <h3><i class="fas fa-sliders-h"></i> Sistem AyarlarÄ±</h3>

                <div class="settings-section">
                    <h5>ðŸŽ¨ GÃ¶rÃ¼nÃ¼m AyarlarÄ±</h5>
                    <div class="theme-selector">
                        <label>Tema:</label>
                        <select id="theme-select">
                            <option value="dark">Koyu Tema</option>
                            <option value="light">AÃ§Ä±k Tema</option>
                            <option value="auto">Sistemle Uyumlu</option>
                        </select>
                    </div>
                    <div class="map-style">
                        <label>Harita Stili:</label>
                        <select id="map-style">
                            <option value="standard">Standart</option>
                            <option value="satellite">Uydu GÃ¶rÃ¼nÃ¼mÃ¼</option>
                            <option value="terrain">Arazi</option>
                            <option value="dark">Koyu Harita</option>
                        </select>
                    </div>
                </div>

                <div class="settings-section">
                    <h5>âš¡ AraÃ§ AyarlarÄ±</h5>
                    <div class="vehicle-settings">
                        <div class="setting-group">
                            <label>YakÄ±t TÃ¼rÃ¼:</label>
                            <select id="fuel-type">
                                <option value="benzin">Benzin</option>
                                <option value="dizel">Dizel</option>
                                <option value="lpg">LPG</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>Ort. YakÄ±t TÃ¼ketimi:</label>
                            <div class="input-with-unit">
                                <input type="number" id="avg-consumption" value="6.5" step="0.1">
                                <span>L/100km</span>
                            </div>
                        </div>
                        <div class="setting-group">
                            <label>HÄ±z Limiti UyarÄ±sÄ±:</label>
                            <div class="input-with-unit">
                                <input type="number" id="speed-limit" value="80" min="1">
                                <span>km/s</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h5>ðŸ”” Bildirim AyarlarÄ±</h5>
                    <div class="notification-settings">
                        <label class="switch">
                            <input type="checkbox" id="notif-speed" checked>
                            <span class="slider"></span>
                            <span class="switch-label">HÄ±z Limit UyarÄ±larÄ±</span>
                        </label>
                        <label class="switch">
                            <input type="checkbox" id="notif-maintenance" checked>
                            <span class="slider"></span>
                            <span class="switch-label">BakÄ±m HatÄ±rlatÄ±cÄ±larÄ±</span>
                        </label>
                        <label class="switch">
                            <input type="checkbox" id="notif-weather">
                            <span class="slider"></span>
                            <span class="switch-label">Hava Durumu UyarÄ±larÄ±</span>
                        </label>
                    </div>
                </div>

                <div class="settings-actions">
                    <button class="save-btn" id="save-settings">
                        <i class="fas fa-save"></i> AyarlarÄ± Kaydet
                    </button>
                    <button class="reset-btn" id="reset-settings">
                        <i class="fas fa-undo"></i> SÄ±fÄ±rla
                    </button>
                </div>
            </div>
        </div>

        <div id="sidebar-toggle">
            <i class="fas fa-chevron-right"></i>
        </div>
    </div>
</div>

<!-- Charts Container -->
<div id="charts-container">
    <div class="chart-card">
        <h4><i class="fas fa-tachometer-alt"></i> HÄ±z GrafiÄŸi</h4>
        <canvas id="speed-chart"></canvas>
    </div>
    <div class="chart-card">
        <h4><i class="fas fa-mountain"></i> YÃ¼kseklik Profili</h4>
        <canvas id="altitude-chart"></canvas>
    </div>
    <div class="chart-card">
        <h4><i class="fas fa-gas-pump"></i> YakÄ±t Analizi</h4>
        <canvas id="fuel-chart"></canvas>
    </div>
</div>

<!-- Loading Overlay -->
<div id="loading-overlay">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <h3>EfeGPS Pro BaÅŸlatÄ±lÄ±yor</h3>
        <p>Sistem bileÅŸenleri yÃ¼kleniyor...</p>
    </div>
</div>

<!-- Emergency Modal -->
<div id="emergency-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-exclamation-triangle"></i> Acil Durum</h3>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <p>Acil durum butonuna basÄ±ldÄ±! Konumunuz paylaÅŸÄ±lacak.</p>
            <div class="emergency-actions">
                <button class="btn-emergency-call">
                    <i class="fas fa-phone"></i> Acil AramasÄ± Yap
                </button>
                <button class="btn-share-location">
                    <i class="fas fa-share-location"></i> Konumu PaylaÅŸ
                </button>
                <button class="btn-cancel-emergency">
                    <i class="fas fa-times"></i> Ä°ptal
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Fuel Price Modal -->
<div id="fuel-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-gas-pump"></i> YakÄ±t HesaplayÄ±cÄ±</h3>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <div class="fuel-calculator">
                <div class="calc-input">
                    <label>Mesafe (km):</label>
                    <input type="number" id="calc-distance" value="100">
                </div>
                <div class="calc-input">
                    <label>YakÄ±t FiyatÄ± (TL/L):</label>
                    <input type="number" id="calc-price" value="42.50" step="0.01">
                </div>
                <div class="calc-input">
                    <label>TÃ¼ketim (L/100km):</label>
                    <input type="number" id="calc-consumption" value="6.5" step="0.1">
                </div>
                <div class="calc-result">
                    <h4>Tahmini Maliyet: <span id="calc-result">276.25 TL</span></h4>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JS -->
<script src="main.js"></script>
</body>
</html>